<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="description" content="Визуализация данных, пошаговое руководство, книга по D3" />
		<meta name="keywords" content="code, art, design, data, visualization, generative, algorithmic, processing, d3, d3.js, book, maps, код, данные, искусство, визуализация, обработка данных, книга, отображение данных" />
		<meta name="author" content="Иванов Сергей" />
	
		<link rel="stylesheet" href="css/metro-bootstrap.css">
		<link rel="stylesheet" href="css/metro-bootstrap-responsive.css">
		<link rel="stylesheet" href="css/iconFont.css">
		<link rel="stylesheet" href="js/prettify/prettify.css">

        <script src="js/jquery/jquery.min.js"></script>
        <script src="js/jquery/jquery.widget.min.js"></script>
        <script src="js/jquery/jquery.mousewheel.js"></script>
		<script src="js/prettify/prettify.js"></script>
        <script src="js/metro/metro.min.js"></script>
		
		<script src="js/docs.js"></script>
		<script src="js/github.info.js"></script>
		<script type="text/javascript">
			var lNavigationDescriptor_obj_arr = [
				{
					pageName : "about.html",
					description : "Об этом руководстве",
					prevPageName : "",
					nextPageName : "fundamentals.html"
				},
				{
					pageName : "fundamentals.html",
					description : "Основы",
					prevPageName : "about.html",
					nextPageName : "setup.html"
				},
				{
					pageName : "setup.html",
					description : "Установка",
					prevPageName : "fundamentals.html",
					nextPageName : "adding_elements.html"
				},
				{
					pageName : "adding_elements.html",
					description : "Добавление элементов",
					prevPageName : "setup.html",
					nextPageName : "chaining_methods.html"
				},
				{
					pageName : "chaining_methods.html",
					description : "Цепочки методов",
					prevPageName : "adding_elements.html",
					nextPageName : "binding_data.html"
				},
				{
					pageName : "binding_data.html",
					description : "Привязка данных",
					prevPageName : "chaining_methods.html",
					nextPageName : "using_your_data.html"
				},
				{
					pageName : "using_your_data.html",
					description : "Использование данных",
					prevPageName : "binding_data.html",
					nextPageName : "drawing_divs.html"
				},
				{
					pageName : "drawing_divs.html",
					description : "Рисование с использованием блоков",
					prevPageName : "using_your_data.html",
					nextPageName : "power_of_data.html"
				},
				{
					pageName : "power_of_data.html",
					description : "Сила метода data()",
					prevPageName : "drawing_divs.html",
					nextPageName : "svg_primer.html"
				},
				{
					pageName : "svg_primer.html",
					description : "Пример с использованием SVG",
					prevPageName : "power_of_data.html",
					nextPageName : "drawing_svgs.html"
				},
				{
					pageName : "drawing_svgs.html",
					description : "Рисование с использованием SVG-элементов",
					prevPageName : "svg_primer.html",
					nextPageName : "types_of_data.html"
				},
				{
					pageName : "types_of_data.html",
					description : "Типы данных",
					prevPageName : "drawing_svgs.html",
					nextPageName : "making_bar_chart.html"
				},
				{
					pageName : "making_bar_chart.html",
					description : "Делаем столбиковую диаграмму",
					prevPageName : "types_of_data.html",
					nextPageName : "making_scatterplot.html"
				},
				{
					pageName : "making_scatterplot.html",
					description : "Делаем точечную диаграмму",
					prevPageName : "making_bar_chart.html",
					nextPageName : "scales.html"
				},
				{
					pageName : "scales.html",
					description : "Масштабирование",
					prevPageName : "making_scatterplot.html",
					nextPageName : "axes.html"
				},
				{
					pageName : "axes.html",
					description : "Координатные оси",
					prevPageName : "scales.html",
					nextPageName : ""
				}
			];
			
			function getPageProperty(aPageName_str, aPropertyName_str) {
				var lPagesCount_int = lNavigationDescriptor_obj_arr.length;
				for (var i = 0; i < lPagesCount_int; i++) {
					var lPageDescriptor_obj = lNavigationDescriptor_obj_arr[i];
					var lPGPageName_str = lPageDescriptor_obj.pageName;
					if (aPageName_str === lPGPageName_str) {
						return lPageDescriptor_obj[aPropertyName_str];
					}
				}
				return "";
			}
			
			window.onload = function () {
				var lPageName_str = location.href.match(/[^/]+\.html/i)[0];
				var lPagesCount_int = lNavigationDescriptor_obj_arr.length;
				for (var i = 0; i < lPagesCount_int; i++) {
					var lPageDescriptor_obj = lNavigationDescriptor_obj_arr[i];
					var lPGPageName_str = lPageDescriptor_obj.pageName;
					if (lPageName_str === lPGPageName_str) {
						var lPGPrevPageName_str = lPageDescriptor_obj.prevPageName;
						var lPGPrevPageDescription_str = getPageProperty(lPGPrevPageName_str, "description");
						var lPGNextPageName_str = lPageDescriptor_obj.nextPageName;
						var lPGNExtPageDescription_str = getPageProperty(lPGNextPageName_str, "description");
						
						var lTopNav_e = $("#top_navigation");
						var lBottomNav_e = $("#bottom_navigation");
						
						if (lPGPrevPageName_str.trim().length > 0) {
							var lPrevPageNav_e = $("<div class=\"span4\" align=\"center\"/>");
							var lLinkText_str = "<i class=\"icon-arrow-left-3\"></i>&nbsp;" + lPGPrevPageDescription_str;
							var lLink_e = $("<a class=\"seganav\" />").attr("href", lPGPrevPageName_str).html(lLinkText_str);
							lPrevPageNav_e.append(lLink_e);
							var lCopyPrevPageNav_e = lPrevPageNav_e.clone();
							lBottomNav_e.append(lPrevPageNav_e);
							lTopNav_e.append(lCopyPrevPageNav_e);
						}
						
						var lContentPageNav_e = $("<div align=\"center\"/>");
						if (lPGPrevPageName_str.trim().length > 0) {
							lContentPageNav_e.addClass("span4");
						} else {
							lContentPageNav_e.addClass("span4 offset4");
						}
						var lLinkText_str = "<i class=\"icon-book\"></i>&nbsp;" + "Оглавление";
						var lLink_e = $("<a class=\"seganav\" />").attr("href", "index.html").html(lLinkText_str);
						lContentPageNav_e.append(lLink_e);
						var lCopyContentPageNav_e = lContentPageNav_e.clone();
						lBottomNav_e.append(lContentPageNav_e);
						lTopNav_e.append(lCopyContentPageNav_e);
						
						if (lPGNextPageName_str.trim().length > 0) {
							var lNextPageNav_e = $("<div class=\"span4\" align=\"center\"/>");
							var lLinkText_str = lPGNExtPageDescription_str + "&nbsp;<i class=\"icon-arrow-right-3\"></i>";
							var lLink_e = $("<a class=\"seganav\" />").attr("href", lPGNextPageName_str).html(lLinkText_str);
							lNextPageNav_e.append(lLink_e);
							var lCopyNextPageNav_e = lNextPageNav_e.clone();
							lBottomNav_e.append(lNextPageNav_e);
							lTopNav_e.append(lCopyNextPageNav_e);
						}
						break;
					}
				}
				if (lPageName_str !== "index.html") {
					$("#top_navigation").show();
					$("#bottom_navigation").show();
				}
			};
		</script>
		<title>Типы данных</title>
	</head>
	<body class="metro">
		<div class="container">
			<div class="grid">
				<div class="row">
					<div class="span12">
						<div class="row bg-cyan" id="top_navigation" style="padding: 20px 0; display: none;">
						</div>
						
						<div align="center">
		<h1>Типы данных</h1>
	</div>
	<br/>
	<p>D3 невероятно гибок в использовании входных данных. Эта глава знакомит читателя со структурами данных, которые обычно используются в JavaScript и D3.</p>
	<br/>
	<h3>Переменные</h3>
	<p>Переменная - это самый маленький строительный блок данных, которая хранит какое-то значение. Переменная является основой для других структур данных, которые представляют собой просто различные конфигурации переменных.</p>
	<p>Если вы новичок в JavaScript - знайте, что это слабо типизированный язык, что означает, что вы не должны указывать тип информации, которая будет храниться в переменной Многие другие языки, такие как Java(который полностью непохож на JavaScript!), требуют, чтобы вы указывали тип переменной, например int, float, boolean или String.</p>
	<pre class="prettyprint linenums">
//Declaring variables in Java
int number = 5;
float value = 12.3467;
boolean active = true;
String text = "Crystal clear";</pre>
	<p>JavaScript, однако, актоматически определяет тип переменной, основываясь на типе информации, с которой вы связали переменную.(Обратите внимание, что '' или "" являются строковыми значениями. Я предпочитаю двойные кавычки, хотя некоторые используют одинарные.)</p>
	<pre class="prettyprint linenums">
//Declaring variables in JavaScript
var number = 5;
var value = 12.3467;
var active = true;
var text = "Crystal clear";</pre>
	<p>Как скучно, <i>var</i>, <i>var</i>, <i>var</i>, <i>var</i>! - более удобно, когда мы объявляем и задаем имя переменной даже не зная, с каким типом данных мы ее свяжем. Вы даже можете менять тип переменных на лету, и JavaScript ничего не будет иметь против.</p>
	<pre class="prettyprint linenums">
var value = 100;
value = 99.9999;
value = false;
value = "This can't possibly work.";
value = "Argh, it does work! No errorzzzz!";</pre>
	<br/>
	<h3>Массивы</h3>
	<p>Массив - это последовательность значений, которая удобно хранится в одной переменной.</p>
	<p>Отслеживание связанных значений в отдельных переменных неэффективно:</p>
	<pre class="prettyprint linenums">
var numberA = 5;
var numberB = 10;
var numberC = 15;
var numberD = 20;
var numberE = 25;</pre>
	<p>Переписать эти значения в виде массива куда проще. Квадратные скобки <i>[]</i> указывают на массив, в то время как каждое значение отделяется запятой:</p>
	<pre class="prettyprint linenums">var numbers = [ 5, 10, 15, 20, 25 ];</pre>
	<p>Массивы вездесущи в визуализации данных, поэтому вы должны очень хорошо быть с ними знакомы. Вы можете получить доступ к значению элемента массива с помощью квадратных скобок:</p>
	<pre class="prettyprint linenums">numbers[2]  //Returns 15</pre>
	<p>Числовое значение в квадратных скобках ссылается на соответствующую позицию в массиве. Запомните, что позиции в массиве отсчитываются с нуля, поэтому первая позиция имеет индекс 0, вторая позиция - 1, и так далее.</p>
	<pre class="prettyprint linenums">
numbers[0]  //Returns 5
numbers[1]  //Returns 10
numbers[2]  //Returns 15
numbers[3]  //Returns 20
numbers[4]  //Returns 25</pre>
	<p>Некоторые люди считают, что полезно представить массив в виде таблицы со строками с столбцами, например:</p>
	<pre class="prettyprint linenums">
 ID | Value
------------
 0  |  5
 1  |  10
 2  |  15
 3  |  20
 4  |  25</pre>
	<p>Массивы могут хранить любые типы данных, не только целочисленные значения.</p>
	<pre class="prettyprint linenums">
	var percentages = [ 0.55, 0.32, 0.91 ];
var names = [ "Ernie", "Bert", "Oscar" ];

percentages[1]  //Returns 0.32
names[1]        //Returns "Bert"</pre>
	<br/>
	<h3>Зачем массивам цикл for()</h3>
	<p>Визуализация данных на основе программного кода была бы невозможна без использования массивов и могучего цикла <i>for()</i>. Вместе они образуют динамичный дуэт обработки данных.</p>
	<p>Массив организует разные значения в одном подходящем месте. Потом цикл <i>for()</i> быстро пробегается по всем значениям в массиве и выполняет некоторые действия с ними - например, выражать значение в качестве наглядной формы. D3 часто организует за нас выполнение цикла благодаря методу <i>data()</i>, но важно уметь самим писать циклы. Я не буду вдаваться в подробности работы цикла <i>for()</i> здесь; это отельная история. Но обратите внимание на пример, который перебирает значения чисел, указанные сверху.</p>
	<pre class="prettyprint linenums">
for (var i = 0; i < numbers.length; i++) {
    console.log(numbers[i]);  //Print value to console
}</pre>
	<p>Видите <i>numbers.length</i>? Это классная штука. Если значений в массиве 10 - значит цикл выполнится 10 раз. Если в цикле будет миллион значений, то и цикл выполнится миллион раз. Это тот случай, когда использование компьютеров является классным решением: принимая набор инструкций, выполнять их снова и снова. И именно поэтому визуализация данных может быть столь полезна - вы проектируете и программируете визуализацию данных, а система будет реагировать соответствующим образом, даже если вы будете использовать разные наборы данных. Правила преобразования данных в визуальные образы являются последовательными, даже, когда данные имеют разные форматы.</p>
	<br/>
	<h3>Объекты</h3>
	<p>Массивы являются замечательным решением для простых наборов данных, но для более сложных наборов данных лучше бы использовать объекты. Для наших целей будем считать объекты JavaScript пользовательскими структурами данных. Мы используем фигурные скобки <i>{}</i> для указания объекта. В квадратные скобки мы включаем поля и их значения. Двоеточие отделяет каждое поле от его значения, а запятая отделяет каждую пару поле/значение.</p>
	<pre class="prettyprint linenums">
var fruit = {
    kind: "grape",
    color: "red",
    quantity: 12,
    tasty: true
};</pre>
	<p>Для доступа к значению поля в объекте мы используем точку, например:</p>
	<pre class="prettyprint linenums">
fruit.kind      //Returns "grape"
fruit.color     //Returns "red"
fruit.quantity  //Returns 12
fruit.tasty     //Returns true</pre>
	<p>Думайте, что значения принадлежат объекту. Давайте посмотрим, что за фрукт. Вы должны задать вопрос: "Какого вида этот фрукт?". Как оказалось, <i>fruit.kind</i> равен "grape". На вопрос "Вкусен ли фрукт?" мы в поле <i>fruit.tasty</i> указываем ответ <i>true</i>.</p>
	<br/>
	<h3>Объекты+массивы</h3>
	<p>Вы можете совмещать эти две структуры чтобы создавать массивы объектов, или объекты с массивами, или объекты объектов, или...любую структуру, которая возможна для вашего набора данных.</p>
	<p>Допустим, мы приобрели еще несколько фруктов, и теперь мы хотим расширить наш набор фруктов. Мы используем квадратные скобки <i>[]</i> снаружи, чтобы обозначить массив, дальше мы используем фигурные скобки <i>{}</i>, для определения объектов:</p>
	<pre class="prettyprint linenums">
var fruits = [
    {
        kind: "grape",
        color: "red",
        quantity: 12,
        tasty: true
    },
    {
        kind: "kiwi",
        color: "brown",
        quantity: 98,
        tasty: true
    },
    {
        kind: "banana",
        color: "yellow",
        quantity: 0,
        tasty: true
    }
];</pre>
	<p>Для доступа к этим данным, мы просто берем индекс того объекта, который нам нужен. Запомните: <i>{}</i> обозначают объект, <i>[]</i> обозначают массив. <i>fruits</i> является массивом, поэтому мы первоначально указываем индекс в массиве:</p>
	<pre class="prettyprint linenums">fruit[1]</pre>
	<p>Далее, так как элементами массива являются объекты, доступ к необходимому полю предоставляется через точку:</p>
	<pre class="prettyprint linenums">fruit[1].quantity   //Returns 98</pre>
	<p>Ниже приведена карта доступа к значениям, расположенным в объектах, хранящихся в массиве <i>fruits</i>:</p>
	<pre class="prettyprint linenums">
fruits[0].kind      ==  "grape"
fruits[0].color     ==  "red"
fruits[0].quantity  ==  12
fruits[0].tasty     ==  true

fruits[1].kind      ==  "kiwi"
fruits[1].color     ==  "brown"
fruits[1].quantity  ==  98
fruits[1].tasty     ==  true

fruits[2].kind      ==  "banana"
fruits[2].color     ==  "yellow"
fruits[2].quantity  ==  0
fruits[2].tasty     ==  true</pre>
	<p>Да, это так. Мы имеем в поле <i>fruits[2].quantity</i> 0 бананов.</p>
	<br/>
	<h3><abbr title="JavaScript Object Notation">JSON</abbr></h3>
	<p>Когда-нибудь в своей карьере при разработке на D3 вы столкнетесь с нотацией объектов JavaScript. Можете прочесть детали <a href="http://en.wikipedia.org/wiki/JSON">тут</a>, но если кратко, то JSON - это синтаксис организации данных в виде объектов JavaScript. Синтаксис преимущественно оптимизирован для работы с JavaScript(что очевидно) и выполнения AJAX-запросов, поэтому вы увидите множество веб-интерфейсов, которые выплевывают данные в формате JSON. Его проще и быстрее обрабатывать нежели XML, и конечно же, D3 превосходно с ним работает.</p>
	<p>Итак, надпись ниже теперь не выглядит более странной, чем то, что мы уже видели:</p>
	<pre class="prettyprint linenums">
var jsonFruit = {
    "kind": "grape",
    "color": "red",
    "quantity": 12,
    "tasty": true
};</pre>
	<p>Разница лишь в том, что наши поля теперь заключены в двойные кавычки, что делает их строковыми значениями.</p>
	<br/>
	<h3>GeoJSON</h3>
	<p>Так же как и JSON является синтаксисом для описания объектов JavaScript, GeoJSON является оптимизированной версией JSON для хранения геоданных. Все объекты GeoJSON являются JSON объектами, а все JSON-объекты являются JavaScript объектами.</p>
	<p><a href="http://geojson.org/geojson-spec.html">GeoJSON</a> может хранить географические координаты, а также сложные фигуры( такие как полигоны и линии) и другие пространственные характеристики. Если у вас много геоданных, оно стоит того, чтобы заморочиться и представить их в формате GeoJSON для удобного использования с D3.</p>
	<p>Мы еще углубимся в детали GeoJSON когда будем говорить о геокартах, а сейчас, просто посмотрите, как могут быть представлены данные в формате GeoJSON:</p>
	<pre class="prettyprint linenums">
var geodata = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [ 150.1282427, -24.471803 ]
            },
            "properties": {
                "type": "town"
            }
        }
    ]
};</pre>
	<p>(Заметьте, что сначала в координатах указываем долготу, а потом широту. Привыкайте.)</p>
						
						<div class="row bg-cyan" id="bottom_navigation" style="padding: 20px 0; display: none;">
						</div>
					</div>
				</div>
				<!--div class="row">
					<div class="span12">
						<div id="disqus_thread"></div>
					</div>
				</div-->
				<div class="row">
					<div class="span12" style="padding-top: 30px; text-align:right;">
						<span class="text-muted">Автором оригинального текста книги <a href="http://alignedleft.com/tutorials/d3">D3 Tutorials</a> является <a href="http://alignedleft.com/">Scott Murray</a></span>
						<br/>
						<span class="text-muted">На русский язык перевел <a href="http://codengineering.ru/">Ivanov Sergey</a>. 2014 год</span>
					</div>
				</div>
			</div>
		</div>
		
		<!--script type="text/javascript">
		var lPageName_str = location.href.match(/[^/]+\.html/i)[0];
		var lPageDescription_str = getPageProperty(lPageName_str, "description");
		
		/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "serganbus"; // required: replace example with your forum shortname
		var disqus_identifier = "http://serganbus.github.io//d3tutorials/" + lPageName_str;
		var disqus_url = "http://serganbus.github.io//d3tutorials/" + lPageName_str;
		var disqus_category_id = "3309433";
		
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
		</script-->
		
		<script>
			/*Google Analytics*/
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-55961107-1', 'auto');
			ga('send', 'pageview');
		</script>
	</body>
</html>
