<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" href="css/metro-bootstrap.css">
		<link rel="stylesheet" href="css/metro-bootstrap-responsive.css">
		<link rel="stylesheet" href="css/iconFont.css">
		<link rel="stylesheet" href="js/prettify/prettify.css">

        <script src="js/jquery/jquery.min.js"></script>
        <script src="js/jquery/jquery.widget.min.js"></script>
        <script src="js/jquery/jquery.mousewheel.js"></script>
		<script src="js/prettify/prettify.js"></script>
        <script src="js/metro/metro.min.js"></script>
		
		<script src="js/docs.js"></script>
		<script src="js/github.info.js"></script>
	
		<title>Пример с использованием SVG</title>
	</head>
	<body class="metro">
		<div class="container">
			<div align="center">
		<h1>Пример с использованием SVG</h1>
	</div>
	<br/>
	<p>D3 наиболее полезен, когда используется для создания и манипулирования визуальными образами на основе SVG. Рисование с использованием div'ов и других HTML-элементов возможно, но немного неуклюже, и обычно появляются несоответствия отображения в различных браузерах. Использование SVG более надежно, визуально последовательно и быстрее.</p>
	<p>Редакторы векторной графики, такие как Illustrator, могут быть использованы для создания SVG-файлов, но нам необходимо научиться создавать их с помощью кода.</p>
	<br/>
	<h3>Элемент SVG</h3>
	<p>Scalable Vector Graphics(масштабируемая векторная графика) - формат изображений на основе текста. Каждое SVG-изображение определено с использованием разметки кода, похожей на HTML. SVG-код может быть включен напрямую в HTML-документ. Каждый веб-браузер поддерживает SVG, исключением является только <a href="http://caniuse.com/#feat=svg">Internet Explorer версии 8 и старше</a>. SVG основан на XML, поэтому вы можете заметить, что элементы, не имеющие закрывающего тега, должны быть самозакрывающимися. Например:</p>
	<pre class="prettyprint linenums">
&lt;element&gt;&lt;/element&gt;   &lt;!-- Uses closing tag --&gt;
&lt;element/&gt;            &lt;!-- Self-closing tag --&gt;</pre>
	<p>Перед тем как вы сможете что-нибудь рисовать, вам надо создать SVG-элемент. Думайте об SVG-элементе, как о холсте, на котором отрисовываются все ваши визуальные образы(В такой трактовке, SVG концептуально схож с элементом HTML - canvas). Как минимум, хорошо задать ширину и высоту с помощью атрибутов width и height, соответственно. Если вы их не зададите, SVG растянется на всю площадь блока.</p>
	<pre class="prettyprint linenums">
&lt;svg width="500" height="50"&gt;
&lt;/svg&gt;</pre>
	<p>Здесь SVG-элемент, созданный с использованием кода выше:</p>
	<svg width="500" height="50"></svg>
	<p>Не видите его? Нажмите правой кнопкой по пустому месту выше и выберите "Просмотр кода элемента". Ваш веб-инспектор должен показать что-то похожее:</p>
	<img src="images/svg_primer_1.png" alt="Отладчик Chrome">
	<p>Заметьте, что тут есть SVG-элемент, который занимает 500 пикселей по горизонтали и 50 пикселей по вертикали.</p>
	<p>Также заметьте, что браузеры считают пиксели единицей измерения по умолчанию. Мы указали размеры как 500 и 50, а не 500px и 50px. Мы можем указать px явно, или любую другую единицу измерения, например: em, pt, in, cm, and mm.</p>
	<br/>
	<h3>Простые фигуры</h3>
	<p>Существует некоторый набор фигур, которые вы можете поместить внутрь элемента SVG. Этот набор включает:  rect, circle, ellipse, line, text и path.</p>
	<p>Если вы знакомы с программирование компьютерной графики, вы вспомните, что обычно координатная система на основе пикселей начинается с левого верхнего угла и имеет координаты точки (0,0). Увеличение х происходить слева направо, увеличение у-сверху вниз.</p>
	<svg width="505" height="65">
		<line x1="5" y1="5" x2="5" y2="50" stroke="gray" stroke-width="1"/>
		<line x1="5" y1="50" x2="0" y2="45" stroke="gray" stroke-width="1"/>
		<line x1="5" y1="50" x2="10" y2="45" stroke="gray" stroke-width="1"/>
		<line x1="5" y1="5" x2="500" y2="5" stroke="gray" stroke-width="1"/>
		<line x1="500" y1="5" x2="495" y2="0" stroke="gray" stroke-width="1"/>
		<line x1="500" y1="5" x2="495" y2="10" stroke="gray" stroke-width="1"/>
		<circle cx="5" cy="5" r="3" fill="#008"/>
		<text x="10" y="20">0,0</text>
		<circle cx="105" cy="25" r="3" fill="#008"/>
		<text x="110" y="40">100,20</text>
		<circle cx="205" cy="45" r="3" fill="#008"/>
		<text x="210" y="60">200,40</text>
	</svg>
	<p>rect рисует квадрат. Квадрат задается четырьмя значениями: x,y - указывают точку верхнего левого угла; width, height - указывают ширину и высоту квадрата. Этот квадрат занимает все пространство нашего SVG:</p>
	<pre class="prettyprint linenums">&lt;rect x="0" y="0" width="500" height="50"/&gt;</pre>
	<svg width="500" height="50"><rect x="0" y="0" width="500" height="50"/></svg>
	<p>circle рисует круг. Круг задается тремя величинами: cx, cy указывают точку, расположенную в центре описываемой окружности, r задает радиус круга. Этот круг расположен в центре нашего SVG, потому что атрибут cx("center-x") равен 250. Пример:</p>
	<pre class="prettyprint linenums">&lt;circle cx="250" cy="25" r="25"/&gt;</pre>
	<svg width="500" height="50"><circle cx="250" cy="25" r="25"/></svg>
	<p>ellipse задается схоже с circle, но предполагается, что радиус задается по двум осям: по х и по у. Вместо х используйте rx, вместо y - ry.</p>
	<pre class="prettyprint linenums">&lt;ellipse cx="250" cy="25" rx="100" ry="25"/&gt;</pre>
	<svg width="500" height="50"><ellipse cx="250" cy="25" rx="100" ry="25"/></svg>
	<p>line рисует линию. Используйте x1 и y1 для задания координат начала линии, и x2 и y2 для задания координат конца. Атрибут stroke должен задавать цвет линии, иначе она будет невидимая.</p>
	<pre class="prettyprint linenums">&lt;line x1="0" y1="0" x2="500" y2="50" stroke="black"/&gt;</pre>
	<svg width="500" height="50"><line x1="0" y1="0" x2="500" y2="50" stroke="black"/></svg>
	<p>text отрисовывает текст. Используйте x, чтобы указать левый край, и y, чтобы указать вертикальную позицию так называемой базовой линии.</p>
	<pre class="prettyprint linenums">&lt;text x="250" y="25"&gt;Easy-peasy&lt;/text&gt;</pre>
	<svg width="500" height="50"><text x="250" y="25">Easy-peasy</text></svg>
	<p>текст будет наследовать CSS-стили шрифта родительского элемента, если только вы не зададите свои стили для текста. Обратите внимание, как форматирование текста выше совпадает с текстом, описываемом в этом параграфе. Мы может переопределить стили форматирования так:</p>
	<pre class="prettyprint linenums">&lt;text x="250" y="25" font-family="sans-serif" font-size="25" fill="gray"&gt;Easy-peasy&lt;/text&gt;</pre>
	<svg width="500" height="50"><text x="250" y="25" font-family="sans-serif" font-size="25" fill="gray">Easy-peasy</text></svg>
	<p>Также заметьте, когда любой визуальный элемент упирается в границу SVG-элемента, он будет обрезан. Будьте осторожны, когда используете text, чтобы ваши загагулины у текста не были обрезаны. Вы можете увидеть, что случится с текстом, если выставить baseline (то есть у) равным 50, такую же, как высота SVG:</p>
	<pre class="prettyprint linenums">&lt;text x="250" y="50" font-family="sans-serif" font-size="25" fill="gray"&gt;Easy-peasy&lt;/text&gt;</pre>
	<svg width="500" height="50"><text x="250" y="50" font-family="sans-serif" font-size="25" fill="gray">Easy-peasy</text></svg>
	<p>path рисует что-нибудь более сложное, чем фигуры, описанные выше(например, силуэт стран на геокартах), и будет описан отдельно. А теперь мы будем работать с простыми фигурами.</p>
	<br/>
	<h3>Стилизация SVG-элементов</h3>
	<p>По умолчанию любой элемент SVG имеет черную заливку и не имеет рамку. Если вы хотите что-то сверх этого, вам придется применить стили к вашему элементу. Общие SVG свойства перечислены ниже:</p>
	<ul>
		<li>
			fill - заливка. Цветовое значение. Также как и в CSS цвет может быть указан несколькими способами:
			<ul>
				<li>по имени: orange;</li>
				<li>значение в шестнадцатиричной системе счисления: #3388aa, #38a;</li>
				<li>значение в формате RGB: rgb(10, 150, 20);</li>
				<li>значение в формате RGBA: rgba(10, 150, 20, 0.5).</li>
			</ul>
		</li>
		<li>stroke - рамка. Цветовое значение.</li>
		<li>stroke-width - ширина рамки(обычно в пикселях).</li>
		<li>opacity - прозрачность. Числовое значение в промежутке от 0.0(полностью прозрачно) до 1.0(полностью видимо).</li>
	</ul>
	<p>С text также можно использовать следующие свойства:</p>
	<ul>
		<li>font-family</li>
		<li>font-size</li>
	</ul>
	<p>Существует два способа применения стилей к SVG-элементам: либо напрямую прописывать стили внутри элемента как его атрибуты, или через правила CSS.</p>
	<p>Ниже некоторые CSS-свойства заданы непосредственно в элементе circle:</p>
	<pre class="prettyprint linenums">&lt;circle cx="25" cy="25" r="22" fill="yellow" stroke="orange" stroke-width="5"/&gt;</pre>
	<svg width="500" height="50"><circle cx="25" cy="25" r="22" fill="yellow" stroke="orange" stroke-width="5"/></svg>
	<p>По-другому мы могли бы сделать так: не прописывать атрибуты стиля, а указать класс стилей(также как и обычному HTML элементу):</p>
	<pre class="prettyprint linenums">&lt;circle cx="25" cy="25" r="22" class="pumpkin"/&gt;</pre>
	<p>а потом добавить fill, stroke и stroke-width параметры в CSS-стили необходимого класса:</p>
	<pre class="prettyprint linenums">
.pumpkin {
    fill: yellow;
    stroke: orange;
    stroke-width: 5;
 }</pre>
	<p>Второй подход имеет несколько очевидных преимуществ:</p>
	<ol>
		<li>Можно описать класс один раз и применять его ко многим элементам.</li>
		<li>CSS-код проще воспринимать, чем атрибуты внутри элементов.</li>
		<li>По этим причинам второй подход более прост в обслуживании, а также он быстрее применим.</li>
	</ol>
	<p>Использование CSS для применения стилей к SVG, однако, может кого-то привести в замешательство. fill, stroke, stroke-width все-таки не CSS-свойства(ближайшие CSS-эквиваленты это background-color и border). Чтобы помочь вам запомнить, какие правила в таблице стилей указаны для SVG-элементов, желательно включать svg в CSS-селектор:</p>
	<pre class="prettyprint linenums">
svg .pumpkin {
    /* ... */
}</pre>
	<br/>
	<h3>Наложение и порядок их рисования</h3>
	<p>В SVG нет как таковых слоев и никакого понятия глубины. SVG не поддерживает CSS-свойство z-index, таким образом фигуры могут быть упорядочены в рамках двухмерного пространства.</p>
	<p>И еще, если нарисовать несколько фигур, то они перекрываются:</p>
	<pre class="prettyprint linenums">
&lt;rect x="0" y="0" width="30" height="30" fill="purple"/&gt;
&lt;rect x="20" y="5" width="30" height="30" fill="blue"/&gt;
&lt;rect x="40" y="10" width="30" height="30" fill="green"/&gt;
&lt;rect x="60" y="15" width="30" height="30" fill="yellow"/&gt;
&lt;rect x="80" y="20" width="30" height="30" fill="red"/&gt;</pre>
	<svg width="500" height="50">
		<rect x="0" y="0" width="30" height="30" fill="purple"/>
		<rect x="20" y="5" width="30" height="30" fill="blue"/>
		<rect x="40" y="10" width="30" height="30" fill="green"/>
		<rect x="60" y="15" width="30" height="30" fill="yellow"/>
		<rect x="80" y="20" width="30" height="30" fill="red"/>
	</svg>
	<p>Порядок, в котором элементы указаны в коде, определяет их глубину. Фиолетовый квадрат указан в коде первым, поэтому первым он и отрисовывается. Дальше рисуется синий квадрат над фиолетовым, дальше зеленый над синим и фиолетовым и т.д.</p>
	<p>Думайте о SVG-фигурах так, будто они рисуются на холсте. Цвет, который применяется позже всех, закрашивает остальные цвета, оказываясь "впереди".</p>
	<p>Этот аспект рисования порядка становится важным, когда у вас есть несколько визуальных элементов, которые не должны быть ничем перекрыты. Например, у вас могут быть оси или метки значений на осях, которые появляются на диаграмме рассеивания. Оси и метки должны быть добавлены в SVG в конце, чтобы они появились перед  остальными элементами и были видны.</p>
	<br/>
	<h3>Прозрачность</h3>
	<p>Прозрачность может быть полезна, когда элементы вашей визуализации пересекаются, но должны быть видимыми все, или когда вы хотите выделить одни элементы, но при этом сделать более незаметными другие.</p>
	<p>Существует два способа применить прозрачность: использовать RGB-цвет с альфа-каналом или установить свойству opacity числовое значение.</p>
	<p>Вы можете использовать rgba() везде, где надо указать цвет, например в атрибутах fill и stroke. rgba() ожидает, что вы передадите ему 3 значения в промежутке от 0 до 255 для красного, зеленого и синего, плюс альфа-канал(прозрачность) в диапазоне от 0.0 до 1.0.</p>
	<pre class="prettyprint linenums">
&lt;circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 1.0)"/&gt;
&lt;circle cx="50" cy="25" r="20" fill="rgba(0, 0, 255, 0.75)"/&gt;
&lt;circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.5)"/&gt;
&lt;circle cx="100" cy="25" r="20" fill="rgba(255, 255, 0, 0.25)"/&gt;
&lt;circle cx="125" cy="25" r="20" fill="rgba(255, 0, 0, 0.1)"/&gt;</pre>
	<svg width="500" height="50">
		<circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 1.0)"/>
		<circle cx="50" cy="25" r="20" fill="rgba(0, 0, 255, 0.75)"/>
		<circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.5)"/>
		<circle cx="100" cy="25" r="20" fill="rgba(255, 255, 0, 0.25)"/>
		<circle cx="125" cy="25" r="20" fill="rgba(255, 0, 0, 0.1)"/>
	</svg>
	<p>Заметьте, что с методом rgba(), прозрачность применяется к fill и stroke атрибутам независимо. Заливка следующих кругов на 75% прозрачна, а их рамка - на 25%:</p>
	<pre class="prettyprint linenums">
&lt;circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"/&gt;
&lt;circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.75)" stroke="rgba(0, 0, 255, 0.25)" stroke-width="10"/&gt;
&lt;circle cx="125" cy="25" r="20" fill="rgba(255, 255, 0, 0.75)" stroke="rgba(255, 0, 0, 0.25)" stroke-width="10"/&gt;</pre>
	<svg width="500" height="50">
		<circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"/>
		<circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.75)" stroke="rgba(0, 0, 255, 0.25)" stroke-width="10"/>
		<circle cx="125" cy="25" r="20" fill="rgba(255, 255, 0, 0.75)" stroke="rgba(255, 0, 0, 0.25)" stroke-width="10"/>
	</svg>
	<p>Для применения прозрачности ко всему элементу, необходимо установить атрибут opacity. Ниже полностью видимые круги:</p>
	<svg width="500" height="50">
		<circle cx="25" cy="25" r="20" fill="purple" stroke="green" stroke-width="10"/>
		<circle cx="65" cy="25" r="20" fill="green" stroke="blue" stroke-width="10"/>
		<circle cx="105" cy="25" r="20" fill="yellow" stroke="red" stroke-width="10"/>
	</svg>
	<p>а это те же круги с различной прозрачностью:</p>
	<pre class="prettyprint linenums">
&lt;circle cx="25" cy="25" r="20" fill="purple" stroke="green" stroke-width="10" opacity="0.9"/&gt;
&lt;circle cx="65" cy="25" r="20" fill="green" stroke="blue" stroke-width="10" opacity="0.5"/&gt;
&lt;circle cx="105" cy="25" r="20" fill="yellow" stroke="red" stroke-width="10" opacity="0.1"/&gt;</pre>
	<svg width="500" height="50">
		<circle cx="25" cy="25" r="20" fill="purple" stroke="green" stroke-width="10" opacity="0.9"/>
		<circle cx="65" cy="25" r="20" fill="green" stroke="blue" stroke-width="10" opacity="0.5"/>
		<circle cx="105" cy="25" r="20" fill="yellow" stroke="red" stroke-width="10" opacity="0.1"/>
	</svg>
	<p>Вы также можете использовать атрибут opacity у элемента, цвета которого заданы в формате rgba(). Когда вы это делаете - прозрачность умножается. Ниже круги используют те же значения цвета RGBA для fill и stroke. У первого элемента не установлен атрибут opacity, а у двух других установлен:</p>
	<pre class="prettyprint linenums">
&lt;circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"/&gt;
&lt;circle cx="65" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10" opacity="0.5"/&gt;
&lt;circle cx="105" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10" opacity="0.2"/&gt;</pre>
	<svg width="500" height="50">
		<circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"/>
		<circle cx="65" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10" opacity="0.5"/>
		<circle cx="105" cy="25" r="20" fill="rgba(128, 0, 128, 0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10" opacity="0.2"/>
	</svg>
	<p>Обратите внимание, что у третьего круга opacity равно 0.2 или 20%. Тем не менее его фиолетовая часть имеет прозрачность в 75%. Таким образом, фиолетовая часть в конечном итоге прозрачна на 0.2*0.75 = 0.15 или 15%.</p>
	<p>Чтобы увидеть большее количество примеров с использованием SVG, включая path, маски, фильтры и т.д. - смотрите <a href="http://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html">SVG пример для браузеров</a>, автором которых является <a href="http://srufaculty.sru.edu/david.dailey/">David Dailey</a>.</p>
		</div>
	</body>
</html>
